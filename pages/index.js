/* eslint-disable @next/next/no-img-element */
import Head from 'next/head'
import Link from "next/link"

import { sanityClient, urlFor } from "../client"

import IndexHeader from '../components/IndexSections/indexHeader'
import ContactInfo from '../components/IndexSections/contact'
import About from '../components/IndexSections/about'  
import Services from '../components/IndexSections/services'  
import Skills from '../components/IndexSections/skills'

import {
  Portfolio,
  PortfolioTitle,
  WebsiteGrid,
  Website,
  WebsiteTitle,
  WebsiteDescription,
  WebsiteTags,
  ImageScreenshot
} from '../components/IndexSections/PortfolioGrid.styled'
import styled from 'styled-components'



//STYLES
 const Wrapper = styled.div`
background: silver;
position:absolute;
top: 0;
z-index: 10000;   
display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr;
  grid-template-areas:
  'a b';

@media only screen and (max-width: 1024px) {
  z-index: 0;
  display: grid;
  grid-template-columns: 1fr;
  // grid-template-rows: 695px;
  grid-template-areas:
  'a'
  'b';
}
@media only screen and (max-width: 500px) {
}
`

 const HomeLeft = styled.div`
background: #3aa1aa;
position: fixed;
border-right: solid 2px black;
  .jt-img {
    grid-area: a;
    border-right: solid 2px black;
  }
    @media only screen and (max-width: 1024px) {
      display: none;
       
    }
    @media only screen and (max-width: 768px) {
    }
` 

 const HomeRight = styled.div`
 background: #fff;
  grid-area: b;
  display: flex; 
  flex-direction: column;
  margin: 0 0 0 10px;
  border-left: solid 2px #000;
  margin-left: 22px;
  
@media only screen and (max-width: 1024px) {
  width: 100%;
  margin: auto;
  padding-top: 60px;
}
@media only screen and (max-width: 531px) { 
}
`
//END STYLES



export default function Home({ posts }) {
  return (
    <>
      <Head>
        <title>Elsa Hovey | Development/ Design</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Wrapper>
        <HomeLeft>
          <IndexHeader />
             </HomeLeft>
             
               <HomeRight> 
                  <About />
                  <Services />
                  <Skills /> 
         
                 <Portfolio>
                <PortfolioTitle id="portfolio">Portfolio</PortfolioTitle>   
                <WebsiteGrid>
                          {posts &&
                          posts.map((post, index) => (   
                            <span key={index}>
                           <Link href={post.projectLink}>
                           <Website>
                                    <WebsiteTitle>{post.websiteTitle}</WebsiteTitle>
                                    <WebsiteDescription>{post.description}</WebsiteDescription>
                                      <ImageScreenshot>
                                        <img
                                        className="website-screenshot"
                                        src={urlFor(post.websiteImg)}
                                        alt=""
                                        layout="fill"
                                        />
                                        </ImageScreenshot>
                                    <WebsiteTags>{post.tags}</WebsiteTags>
                            </Website>
                            </Link>
                              </span>   
                            ))}
                          </WebsiteGrid>
                          </Portfolio>
                      <div id="contact">
                  <ContactInfo />
                  </div>
         </HomeRight>
         </Wrapper>
    </>
  )
}


export const getServerSideProps = async() => {
  const query = '*[_type == "websites"]'
  const posts = await sanityClient.fetch(query)
  if (!posts.length) {
    return {
      props: {
        posts: [],
      },
    }
  } else {
    return {
      props: {
        posts,
      },
    }
  }
}
 