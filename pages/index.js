import Head from 'next/head'
import { sanityClient, urlFor } from "../client"
import {
  Wrapper,
  HomeLeft,
  HomeRight,
  Skills,
  ToolsTitle,
  Grid,
  ToolsWrapper,
  SkillsTitle,
} from '../components/styles/IndexGrid.styled'

import IndexHeader from '../components/sections/indexHeader'
import ContactInfo from '../components/sections/contact'
import About from '../components/sections/about'  

export default function Home({posts}) {
  return (
    <>
    <div>
      <Head>
        <title>Elsa Hovey | Development/ Design</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Wrapper>

        <HomeLeft>

          <IndexHeader />
             
               </HomeLeft>
 

               <HomeRight>
                <About />




                <Skills>
                  <SkillsTitle>Skills</SkillsTitle>
               <ul>
                <h3>Frontend Web Design</h3> 
                          <li>Colorful websites for creative niches and small businesses.</li>
                          <li>Quick and interactive styling</li>
                          <li>Effective SEO</li>
                          </ul> 

                <ul>
                <h3>Content Management</h3>  
                          <li>Currently using Sanity.io for content writing, image management, and backend data storage</li>
                          <li>I work one on one with customers to create the ideal website product</li>
                          <li>In my freetime, I also work and manage my
                             own projects
                              </li> 
                          </ul>
                </Skills>




                <ToolsWrapper>
                <ToolsTitle>Tools</ToolsTitle>  

                   <Grid>
                      {posts &&
                      posts.map((post, index) => (   
                        <span key={index}>
                              <img
                              className="img"
                              src={urlFor(post.icon)}
                              alt=""
                              />
                                <h2>{post.name}</h2>
                        </span>
                        ))}
                      </Grid>
                      </ToolsWrapper>

                  <ContactInfo id="contact" />
                  
         </HomeRight>

         </Wrapper>
    </div>

    </>
  )
}
  


export const getServerSideProps = async() => {
  const query = '*[ _type == "skills"] | order(_createdAt desc)[0..9]'
  const posts = await sanityClient.fetch(query)

  if (!posts.length) {
    return {
      props: {
        posts: [],
      },
    }
  } else {
    return {
      props: {
        posts,
      },
    }
  }
}
 
