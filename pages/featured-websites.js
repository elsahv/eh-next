/* eslint-disable @next/next/no-img-element */
import Head from 'next/head'
import { sanityClient, urlFor } from "../client"
import styled from 'styled-components'



const Title = styled.div`
display: flex;
justify-content: center;
padding: 60px 0 0 0;
font-size: 35px;
color: #007ba5;
background: #3aa1aa;

text-decoration: underline;
@media only screen and (max-width: 1024px) {
}
`

export const Wrapper = styled.div`
display: flex;
justify-content: center;
padding: 50px 0 250px 0;
background: #3aa1aa;

`


export const Description = styled.span`
 padding: 25px;
 font-size: 15px;
@media only screen and (max-width: 1024px) {
  padding: 15px;

}
`


 

export const Grid = styled.div`
display: grid;
grid-template-columns: repeat(3, 400px);
grid-gap: 3em;
cursor: pointer;
.image {
    width: 100%;
    height: 215px;
    border-top: solid 2px black;
    border-bottom: solid 2px black;
}
@media only screen and (max-width: 1024px) {
  display: grid;
grid-template-columns: repeat(2, 300px);
grid-gap: 3em;
}
@media only screen and (max-width: 500px) {
  display: grid;
  grid-template-columns: 260px;
  grid-gap: 3em;
}
 
`

export const PostTitles = styled.h4`
 font-size: 22px;
 padding: 10px;
@media only screen and (max-width: 1024px) {
 font-size: 15px;
font-weight: bold;
}
`

export const GridSquare = styled.h4`
background: teal;
border: solid 2px black;
border-radius: 45px;
text-align: center;
height: 380px;
transition: all 0.3s ease;
&:hover{
    transform: rotate(3deg);
   }
   a {
       color: #000;
       text-decoration: none;
   }

@media only screen and (max-width: 1024px) {

}
@media only screen and (max-width: 768px) {
}
`

export const Tags = styled.h4`
font-size: 17px;
padding: 5px;
@media only screen and (max-width: 768px) {
font-size: 15px;
padding: 5px;
}
`


export default function Misc({posts}) {
  return (
    <>  
      <Head>
        <title>Elsa Hovey | Featured Websites</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>     
      <Title>Portfolio</Title>  

     <Wrapper> 
       <Grid>
       {posts &&
        posts.map((post, index) => (   
          <span key={index}>
             
            <GridSquare>
            <a href={post.projectLink} target="_blank" rel="noreferrer">
          <PostTitles>{post.title}</PostTitles>
            <Description>{post.description}</Description>
          <img 
               src={urlFor(post.imgUrl)}
               alt="main pic"
               className="image"
              
               />
            <Tags>-{post.tags}</Tags>
            </a>

          </GridSquare>
          </span>
          ))}
          </Grid>
          </Wrapper>
    </>
  )
}


export const getServerSideProps = async () => {
  const query = '*[ _type == "websites"] | order(_createdAt desc)[0..9]'
  const posts = await sanityClient.fetch(query)

  if (!posts.length) {
    return {
      props: {
        posts: [],
      },
    }
  } else {
    return {
      props: {
        posts,
      },
    }
  }
}
 